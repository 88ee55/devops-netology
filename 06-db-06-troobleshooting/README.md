# Домашнее задание к занятию "6.6. Troubleshooting"

## Задача 1

В mongo-shell выполнить запрос
```
db.currentOp({"secs_running": {$gte: 300}})
```
Смотрим opid и завершаем запрос

```
db.killOp(<opid>)
```

Для решения проблемы с долгими запросами можно

* оптимизировать запрос
* создать индексы
* увеличить количество шардов

## Задача 2

Очистка от старых ключей происходит каждые 100 мс, по-умолчанию за раз вычищается не более 20 ключей.
Если в бд более 25% истекающих ключей в данную секунду, то redis блокируется, пока количество истекших ключей не станет менее 25%

## Задача 3

* большой запрос, который не успевает передаться (увеличить параметр net_read_timeout)
* большой запрос, тип BLOB (увеличить параметр max_allowed_packet)
* медленное соединение (увеличить параметр connect_timeout)

## Задача 4

Нехватка оперативной памяти.
Чтобы решить эту проблемы нужно увеличить RAM и/или SWAP

